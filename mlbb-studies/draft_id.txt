<?php
// ...existing code...

// Prefill form from a saved draft if ?draft_id= is present
if (isset($_GET['draft_id']) && is_numeric($_GET['draft_id'])) {
    $draft_id = intval($_GET['draft_id']);
    $mysqli = get_db_connection();
    $stmt = $mysqli->prepare("SELECT * FROM drafts WHERE id=? AND user_id=?");
    $stmt->bind_param('ii', $draft_id, $user_id);
    $stmt->execute();
    $draft = $stmt->get_result()->fetch_assoc();
    $stmt->close();
    $mysqli->close();

    if ($draft) {
        $_POST['your_team_id'] = $draft['your_team_id'];
        $_POST['enemy_team_id'] = $draft['enemy_team_id'];
        $_POST['pick_order'] = $draft['pick_order'];
        $_POST['winner'] = $draft['winner'];
        $_POST['your_team'] = json_decode($draft['your_picks'], true);
        $_POST['enemy_team'] = json_decode($draft['enemy_picks'], true);
        $_POST['your_bans'] = json_decode($draft['your_bans'], true);
        $_POST['enemy_bans'] = json_decode($draft['enemy_bans'], true);
    }
}

// ...existing code...

or

<?php
<!-- Add this below your "Back to Matches" button in view-draft.php -->
<form action="draft-analysis.php" method="post" target="_blank" class="d-inline">
    <input type="hidden" name="your_team_id" value="<?= htmlspecialchars($draft['your_team_id']) ?>">
    <input type="hidden" name="enemy_team_id" value="<?= htmlspecialchars($draft['enemy_team_id']) ?>">
    <input type="hidden" name="pick_order" value="<?= htmlspecialchars($draft['pick_order']) ?>">
    <input type="hidden" name="winner" value="<?= htmlspecialchars($draft['winner']) ?>">
    <?php
    foreach (json_decode($draft['your_picks'], true) as $pick) {
        echo '<input type="hidden" name="your_team[]" value="' . htmlspecialchars($pick) . '">';
    }
    foreach (json_decode($draft['enemy_picks'], true) as $pick) {
        echo '<input type="hidden" name="enemy_team[]" value="' . htmlspecialchars($pick) . '">';
    }
    foreach (json_decode($draft['your_bans'], true) as $ban) {
        echo '<input type="hidden" name="your_bans[]" value="' . htmlspecialchars($ban) . '">';
    }
    foreach (json_decode($draft['enemy_bans'], true) as $ban) {
        echo '<input type="hidden" name="enemy_bans[]" value="' . htmlspecialchars($ban) . '">';
    }
    ?>
    <button type="submit" class="btn btn-warning mt-2 ms-2">
        <i class="bi bi-graph-up-arrow me-1"></i> Analyze Draft
    </button>
</form>